(function(a){function b(f){if(d[f])return d[f].exports;var g=d[f]={i:f,l:!1,exports:{}};return a[f].call(g.exports,g,g.exports,b),g.l=!0,g.exports}var d={};return b.m=a,b.c=d,b.i=function(f){return f},b.d=function(f,g,k){b.o(f,g)||Object.defineProperty(f,g,{configurable:!1,enumerable:!0,get:k})},b.n=function(f){var g=f&&f.__esModule?function(){return f['default']}:function(){return f};return b.d(g,'a',g),g},b.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},b.p='',b(b.s=0)})([function(){'use strict';function f(){}function g(hb,ib){let kb,lb,mb,nb,jb=pa;for(nb=arguments.length;2<nb--;)oa.push(arguments[nb]);for(ib&&null!=ib.children&&(!oa.length&&oa.push(ib.children),delete ib.children);oa.length;)if((lb=oa.pop())&&void 0!==lb.pop)for(nb=lb.length;nb--;)oa.push(lb[nb]);else(!0===lb||!1===lb)&&(lb=null),(mb='function'!=typeof hb)&&(null==lb?lb='':'number'==typeof lb?lb+='':'string'!=typeof lb&&(mb=!1)),mb&&kb?jb[jb.length-1]+=lb:jb===pa?jb=[lb]:jb.push(lb),kb=mb;let ob=new f;return ob.nodeName=hb,ob.children=jb,ob.attributes=null==ib?void 0:ib,ob.key=null==ib?void 0:ib.key,void 0!==na.vnode&&na.vnode(ob),ob}function k(hb,ib){for(let jb in ib)hb[jb]=ib[jb];return hb}function m(hb){!hb._dirty&&(hb._dirty=!0)&&1==wa.push(hb)&&(na.debounceRendering||setTimeout)(n)}function n(){let hb,ib=wa;for(wa=[];hb=ib.pop();)hb._dirty&&M(hb)}function q(hb,ib,jb){return'string'==typeof ib||'number'==typeof ib?void 0!==hb.splitText:'string'==typeof ib.nodeName?!hb._componentConstructor&&r(hb,ib.nodeName):jb||hb._componentConstructor===ib.nodeName}function r(hb,ib){return hb.normalizedNodeName===ib||hb.nodeName.toLowerCase()===ib.toLowerCase()}function u(hb){let ib=k({},hb.attributes);ib.children=hb.children;let jb=hb.nodeName.defaultProps;if(jb!==void 0)for(let kb in jb)void 0===ib[kb]&&(ib[kb]=jb[kb]);return ib}function w(hb,ib){let jb=ib?document.createElementNS('http://www.w3.org/2000/svg',hb):document.createElement(hb);return jb.normalizedNodeName=hb,jb}function x(hb){hb.parentNode&&hb.parentNode.removeChild(hb)}function y(hb,ib,jb,kb,lb){if('className'===ib&&(ib='class'),'key'===ib);else if('ref'===ib)jb&&jb(null),kb&&kb(hb);else if('class'===ib&&!lb)hb.className=kb||'';else if('style'===ib){if(kb&&'string'!=typeof kb&&'string'!=typeof jb||(hb.style.cssText=kb||''),kb&&'object'==typeof kb){if('string'!=typeof jb)for(let mb in jb)mb in kb||(hb.style[mb]='');for(let mb in kb)hb.style[mb]='number'==typeof kb[mb]&&!1===va.test(mb)?kb[mb]+'px':kb[mb]}}else if('dangerouslySetInnerHTML'===ib)kb&&(hb.innerHTML=kb.__html||'');else if('o'==ib[0]&&'n'==ib[1]){let mb=ib!==(ib=ib.replace(/Capture$/,''));ib=ib.toLowerCase().substring(2),kb?!jb&&hb.addEventListener(ib,A,mb):hb.removeEventListener(ib,A,mb),(hb._listeners||(hb._listeners={}))[ib]=kb}else if('list'!==ib&&'type'!==ib&&!lb&&ib in hb)z(hb,ib,null==kb?'':kb),(null==kb||!1===kb)&&hb.removeAttribute(ib);else{let mb=lb&&ib!==(ib=ib.replace(/^xlink\:?/,''));null==kb||!1===kb?mb?hb.removeAttributeNS('http://www.w3.org/1999/xlink',ib.toLowerCase()):hb.removeAttribute(ib):'function'!=typeof kb&&(mb?hb.setAttributeNS('http://www.w3.org/1999/xlink',ib.toLowerCase(),kb):hb.setAttribute(ib,kb))}}function z(hb,ib,jb){try{hb[ib]=jb}catch(kb){}}function A(hb){return this._listeners[hb.type](na.event&&na.event(hb)||hb)}function B(){for(let hb;hb=xa.pop();)na.afterMount&&na.afterMount(hb),hb.componentDidMount&&hb.componentDidMount()}function C(hb,ib,jb,kb,lb,mb){ya++||(za=null!=lb&&void 0!==lb.ownerSVGElement,Aa=null!=hb&&!(ua in hb));let nb=D(hb,ib,jb,kb,mb);return lb&&nb.parentNode!==lb&&lb.appendChild(nb),--ya||(Aa=!1,!mb&&B()),nb}function D(hb,ib,jb,kb,lb){let mb=hb,nb=za;if(null==ib&&(ib=''),'string'==typeof ib)return hb&&void 0!==hb.splitText&&hb.parentNode&&(!hb._component||lb)?hb.nodeValue!=ib&&(hb.nodeValue=ib):(mb=document.createTextNode(ib),hb&&(hb.parentNode&&hb.parentNode.replaceChild(mb,hb),F(hb,!0))),mb[ua]=!0,mb;if('function'==typeof ib.nodeName)return N(hb,ib,jb,kb);if(za='svg'===ib.nodeName||'foreignObject'!==ib.nodeName&&za,(!hb||!r(hb,ib.nodeName+''))&&(mb=w(ib.nodeName+'',za),hb)){for(;hb.firstChild;)mb.appendChild(hb.firstChild);hb.parentNode&&hb.parentNode.replaceChild(mb,hb),F(hb,!0)}let ob=mb.firstChild,pb=mb[ua]||(mb[ua]={}),qb=ib.children;return!Aa&&qb&&1===qb.length&&'string'==typeof qb[0]&&null!=ob&&void 0!==ob.splitText&&null==ob.nextSibling?ob.nodeValue!=qb[0]&&(ob.nodeValue=qb[0]):(qb&&qb.length||null!=ob)&&E(mb,qb,jb,kb,Aa||null!=pb.dangerouslySetInnerHTML),H(mb,ib.attributes,pb),za=nb,mb}function E(hb,ib,jb,kb,lb){let ub,vb,wb,xb,mb=hb.childNodes,nb=[],ob={},pb=0,qb=0,rb=mb.length,sb=0,tb=ib?ib.length:0;if(0!==rb)for(let yb=0;yb<rb;yb++){let zb=mb[yb],Ab=zb[ua],Bb=tb&&Ab?zb._component?zb._component.__key:Ab.key:null;null==Bb?(Ab||(void 0===zb.splitText?lb:!lb||zb.nodeValue.trim()))&&(nb[sb++]=zb):(pb++,ob[Bb]=zb)}if(0!==tb)for(let yb=0;yb<tb;yb++){wb=ib[yb],xb=null;let zb=wb.key;if(null!=zb)pb&&void 0!==ob[zb]&&(xb=ob[zb],ob[zb]=void 0,pb--);else if(!xb&&qb<sb)for(ub=qb;ub<sb;ub++)if(void 0!==nb[ub]&&q(vb=nb[ub],wb,lb)){xb=vb,nb[ub]=void 0,ub===sb-1&&sb--,ub===qb&&qb++;break}xb=D(xb,wb,jb,kb),xb&&xb!==hb&&(yb>=rb?hb.appendChild(xb):xb!==mb[yb]&&(xb===mb[yb+1]?x(mb[yb]):hb.insertBefore(xb,mb[yb]||null)))}if(pb)for(let yb in ob)void 0!==ob[yb]&&F(ob[yb],!1);for(;qb<=sb;)void 0!==(xb=nb[sb--])&&F(xb,!1)}function F(hb,ib){let jb=hb._component;jb?O(jb):(null!=hb[ua]&&hb[ua].ref&&hb[ua].ref(null),(!1===ib||null==hb[ua])&&x(hb),G(hb))}function G(hb){for(hb=hb.lastChild;hb;){let ib=hb.previousSibling;F(hb,!0),hb=ib}}function H(hb,ib,jb){for(var kb in jb)ib&&null!=ib[kb]||null==jb[kb]||y(hb,kb,jb[kb],jb[kb]=void 0,za);for(kb in ib)'children'===kb||'innerHTML'===kb||kb in jb&&ib[kb]===('value'===kb||'checked'===kb?hb[kb]:jb[kb])||y(hb,kb,jb[kb],jb[kb]=ib[kb],za)}function I(hb){let ib=hb.constructor.name;(Ba[ib]||(Ba[ib]=[])).push(hb)}function J(hb,ib,jb){let lb,kb=Ba[hb.name];if(hb.prototype&&hb.prototype.render?(lb=new hb(ib,jb),P.call(lb,ib,jb)):(lb=new P(ib,jb),lb.constructor=hb,lb.render=K),kb)for(let mb=kb.length;mb--;)if(kb[mb].constructor===hb){lb.nextBase=kb[mb].nextBase,kb.splice(mb,1);break}return lb}function K(hb,ib,jb){return this.constructor(hb,jb)}function L(hb,ib,jb,kb,lb){hb._disable||(hb._disable=!0,(hb.__ref=ib.ref)&&delete ib.ref,(hb.__key=ib.key)&&delete ib.key,!hb.base||lb?hb.componentWillMount&&hb.componentWillMount():hb.componentWillReceiveProps&&hb.componentWillReceiveProps(ib,kb),kb&&kb!==hb.context&&(!hb.prevContext&&(hb.prevContext=hb.context),hb.context=kb),!hb.prevProps&&(hb.prevProps=hb.props),hb.props=ib,hb._disable=!1,jb!==qa&&(jb!==ra&&!1===na.syncComponentUpdates&&hb.base?m(hb):M(hb,ra,lb)),hb.__ref&&hb.__ref(hb))}function M(hb,ib,jb,kb){if(hb._disable)return;let wb,xb,yb,lb=hb.props,mb=hb.state,nb=hb.context,ob=hb.prevProps||lb,pb=hb.prevState||mb,qb=hb.prevContext||nb,rb=hb.base,sb=hb.nextBase,tb=rb||sb,ub=hb._component,vb=!1;if(rb&&(hb.props=ob,hb.state=pb,hb.context=qb,ib!==sa&&hb.shouldComponentUpdate&&!1===hb.shouldComponentUpdate(lb,mb,nb)?vb=!0:hb.componentWillUpdate&&hb.componentWillUpdate(lb,mb,nb),hb.props=lb,hb.state=mb,hb.context=nb),hb.prevProps=hb.prevState=hb.prevContext=hb.nextBase=null,hb._dirty=!1,!vb){wb=hb.render(lb,mb,nb),hb.getChildContext&&(nb=k(k({},nb),hb.getChildContext()));let Ab,Bb,zb=wb&&wb.nodeName;if('function'==typeof zb){let Cb=u(wb);xb=ub,xb&&xb.constructor===zb&&Cb.key==xb.__key?L(xb,Cb,ra,nb,!1):(Ab=xb,hb._component=xb=J(zb,Cb,nb),xb.nextBase=xb.nextBase||sb,xb._parentComponent=hb,L(xb,Cb,qa,nb,!1),M(xb,ra,jb,!0)),Bb=xb.base}else yb=tb,Ab=ub,Ab&&(yb=hb._component=null),(tb||ib===ra)&&(yb&&(yb._component=null),Bb=C(yb,wb,nb,jb||!rb,tb&&tb.parentNode,!0));if(tb&&Bb!==tb&&xb!==ub){let Cb=tb.parentNode;Cb&&Bb!==Cb&&(Cb.replaceChild(Bb,tb),!Ab&&(tb._component=null,F(tb,!1)))}if(Ab&&O(Ab),hb.base=Bb,Bb&&!kb){let Cb=hb,Db=hb;for(;Db=Db._parentComponent;)(Cb=Db).base=Bb;Bb._component=Cb,Bb._componentConstructor=Cb.constructor}}if(!rb||jb?xa.unshift(hb):!vb&&(B(),hb.componentDidUpdate&&hb.componentDidUpdate(ob,pb,qb),na.afterUpdate&&na.afterUpdate(hb)),null!=hb._renderCallbacks)for(;hb._renderCallbacks.length;)hb._renderCallbacks.pop().call(hb);ya||kb||B()}function N(hb,ib,jb,kb){let lb=hb&&hb._component,mb=lb,nb=hb,ob=lb&&hb._componentConstructor===ib.nodeName,pb=ob,qb=u(ib);for(;lb&&!pb&&(lb=lb._parentComponent);)pb=lb.constructor===ib.nodeName;return lb&&pb&&(!kb||lb._component)?(L(lb,qb,ta,jb,kb),hb=lb.base):(mb&&!ob&&(O(mb),hb=nb=null),lb=J(ib.nodeName,qb,jb),hb&&!lb.nextBase&&(lb.nextBase=hb,nb=null),L(lb,qb,ra,jb,kb),hb=lb.base,nb&&hb!==nb&&(nb._component=null,F(nb,!1))),hb}function O(hb){na.beforeUnmount&&na.beforeUnmount(hb);let ib=hb.base;hb._disable=!0,hb.componentWillUnmount&&hb.componentWillUnmount(),hb.base=null;let jb=hb._component;jb?O(jb):ib&&(ib[ua]&&ib[ua].ref&&ib[ua].ref(null),hb.nextBase=ib,x(ib),I(hb),G(ib)),hb.__ref&&hb.__ref(null)}function P(hb,ib){this._dirty=!0,this.context=ib,this.props=hb,this.state=this.state||{}}function R(hb,ib,jb){return ib.startsWith('oauth/')||(ib=`api/v1/${ib}`),fetch(`https://${hb}/${ib}`,jb)}function S(hb,ib,jb){return R(hb.domain,ib,Object.assign({},jb,{headers:{Authorization:`Bearer ${hb.access_token}`}}))}function T(hb){return Da.entry(`registration-${hb}`).orInsertWith(()=>U(hb))}async function U(hb){const ib=new URLSearchParams;ib.append('response_type','code'),ib.append('client_name','Leviathan'),ib.append('redirect_uris','urn:ietf:wg:oauth:2.0:oob');const jb=await R(hb,'apps',{method:'POST',body:ib});return await jb.json()}async function V(hb,ib,jb){const kb=await T(hb),lb=new URLSearchParams;lb.append('client_id',kb.client_id),lb.append('client_secret',kb.client_secret),lb.append('grant_type','password'),lb.append('username',ib),lb.append('password',jb);const mb=await R(hb,'oauth/token',{method:'POST',redirect:'manual',body:lb});if(200!==mb.status)return{success:!1};const nb=Object.assign((await mb.json()),{domain:hb});return Da.set('token',nb),{success:!0,token:nb}}function W(){return Da.get('token')}function X(){Da.delete('token')}async function Y(hb){const ib=await S(hb,'accounts/verify_credentials');return await ib.json()}function Z(hb,ib){return(jb)=>{hb[ib]=jb}}function $(hb,ib){return(...jb)=>hb[ib](...jb)}function _(hb){if(!hb||'object'!==('undefined'==typeof hb?'undefined':Ea(hb)))return!1;var ib=Object.getPrototypeOf(hb);return!ib||ib===Object.prototype}function aa(hb,ib,jb){return'object'===('undefined'==typeof ib?'undefined':Ea(ib))&&ib?(Object.keys(ib).forEach(function(kb){var lb=ib[kb];void 0===lb||null===lb?delete hb[kb]:!0!==jb&&_(lb)?((!Fa(hb,kb)||!_(hb[kb]))&&(hb[kb]={}),aa(hb[kb],lb)):hb[kb]=lb}),hb):hb}function ba(hb,ib,jb,kb){var lb=void 0;for(lb in ib){var mb=ib[lb];if(lb in hb){var nb=hb[lb],ob='function'==typeof nb,pb=lb+':'+Ha(ob?mb:!!mb);if(!Fa(jb,pb)){jb[pb]=aa({},ob?nb(mb):mb&&nb);var qb={};ba(hb,jb[pb],jb,qb),jb[pb]=qb}aa(kb,jb[pb])}else _(mb)?(Fa(kb,lb)&&_(kb[lb])||(kb[lb]={}),ba(hb,mb,jb,kb[lb])):kb[lb]=mb}return kb}function da(hb,ib,jb){for(var lb,kb=hb.length-1;0<=kb;kb--)lb=hb[kb],lb&&('number'==typeof lb.length?da(lb,ib,jb):!jb[lb.id]&&(ib.unshift(lb),jb[lb.id]=!0,lb.parents&&da(lb.parents,ib,jb)))}function ea(){var hb=[];return da(arguments,hb,{}),hb}function fa(hb){return hb.replace(/([A-Z])/g,'-$1')}function ga(hb,ib){if(!1,Array.isArray(ib))return ib.map(function(kb){return ga(hb,kb)}).reverse().join('\n');var jb=Ka[hb];return'content'===hb?ib=JSON.stringify(ib):'number'==typeof ib&&!jb&&(ib+='px'),hb in Ja||(Ja[hb]=fa(hb)),Ja[hb]+':'+ib+';'}function ha(hb,ib,jb,kb){var lb='',mb=[];for(var nb in ib){var ob=ib[nb];_(ob)?mb.push(nb):lb+=ga(nb,ob)}lb&&(lb=hb+'{'+lb+'}',kb&&(lb=kb+'{'+lb+'}'),jb(lb));for(var pb=0;pb<mb.length;pb++){var qb=mb[pb],rb=ib[qb];if('@'===qb[0])ha(hb,rb,jb,qb);else{var sb='$'===qb[0]?'::'+qb.slice(1):':'===qb[0]?qb:':'+qb;ha(''+hb+fa(sb),rb,jb,kb)}}}function ia(hb){var ib=0,jb=Object.create(null);return function(lb){var mb;return{toString:function(){if(!mb){var ob=-1;mb=ea(lb).map(function(pb){for(var qb=-1,rb=jb[pb.id]||(jb[pb.id]=[]),sb=0;sb<rb.length;sb++)if(rb[sb]>ob){qb=rb[sb];break}return 0>qb&&(ha('.'+pb.class+'__'+ib,pb.declarations,hb),rb.push(ib),qb=ib,ib+=1),ob=qb,pb.class+'__'+qb}).join(' ')}return mb},_rules:lb}}}function ja(){function hb(){return zb(kb(arguments))}function ib(Eb){return function(Fb){for(var Gb in Fb)Eb(Gb,Fb[Gb]);return hb}}function jb(Eb,Fb){var Hb,Gb=void 0;for(Gb=0,Hb=Eb.length;Gb<Hb;Gb++){var Ib=Eb[Gb];if(Ib){var Jb='undefined'==typeof Ib?'undefined':Ea(Ib);if('object'===Jb&&Ib)Ib._rules?jb(Ib._rules,Fb):Ib.length?jb(Ib,Fb):Fb.push(Ib);else if('string'===Jb){if(!(Ib in Db))throw new Error('Unknown style "'+Ib+'"');Fb.push(Db[Ib])}else throw new Error('Style "'+Ib+'" has wrong type')}}return Fb}function kb(){return jb(arguments,[])}function mb(Eb,Fb){return Cb[Eb]=Fb,hb}function nb(Eb,Fb){var Gb=Fb.inherit?Array.isArray(Fb.inherit)?Fb.inherit:[Fb.inherit]:[];return Db[Eb]={id:La,class:qb+'__'+Eb,parents:kb(Gb),declarations:Ia(Cb,Fb,Ab)},La+=1,hb}var ob=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pb=ob.name,qb=void 0===pb?'':pb,rb=ob.backend,sb=void 0===rb?null:rb,tb=ob._renderer,ub=void 0===tb?null:tb,vb=ob._styles,wb=void 0===vb?null:vb,xb=ob._transforms,yb=void 0===xb?null:xb,zb=ub||ia(sb||Ga()),Ab=Object.create(null),Bb=Object.create(null),Cb=Object.create(yb),Db=Object.create(wb);return hb.namespace=function(Eb){return Eb in Bb||(Bb[Eb]=ja({name:qb?qb+'_'+Eb:Eb,_renderer:zb,_transforms:Cb,_styles:Db})),Bb[Eb]},hb.addTransform=mb,hb.addTransforms=ib(mb),hb.addRule=nb,hb.addRules=ib(nb),hb}function ka(hb){return /^(?:https?:\/\/)?([^\/]*)/.exec(hb)[1]}async function la(hb){const ib=await S(hb,'timelines/home');return await ib.json()}async function ma(){const hb=W();if(hb){const ib=await Y(hb);return{account:ib,token:hb}}return{account:!1}}var na={};const oa=[],pa=[],qa=0,ra=1,sa=2,ta=3,ua='__preactattr_',va=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;let wa=[];const xa=[];let ya=0,za=!1,Aa=!1;const Ba={};k(P.prototype,{setState(hb,ib){let jb=this.state;this.prevState||(this.prevState=k({},jb)),k(jb,'function'==typeof hb?hb(jb,this.props):hb),ib&&(this._renderCallbacks=this._renderCallbacks||[]).push(ib),m(this)},forceUpdate(hb){hb&&(this._renderCallbacks=this._renderCallbacks||[]).push(hb),M(this,sa)},render(){}});class Ca{constructor(hb,ib){this._holder=hb,this._key=ib}get key(){return this._key}orInsert(hb){return this._holder.has(this._key)||this._holder.set(this._key,hb),this._holder.get(this._key)}async orInsertWith(hb){return this._holder.has(this._key)||this._holder.set(this._key,(await hb())),this._holder.get(this._key)}}var Da={get(hb){const ib=localStorage.getItem(hb);if(ib)try{return JSON.parse(ib)}catch(jb){}},set(hb,ib){localStorage.setItem(hb,JSON.stringify(ib))},has(hb){return localStorage.hasOwnProperty(hb)},delete(hb){localStorage.removeItem(hb)},entry(hb){return new Ca(this,hb)}},Ea='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(hb){return typeof hb}:function(hb){return hb&&'function'==typeof Symbol&&hb.constructor===Symbol&&hb!==Symbol.prototype?'symbol':typeof hb},Fa=function(hb,ib){return Object.prototype.hasOwnProperty.call(hb,ib)},Ga=function(){var hb=document.createElement('style');document.head.appendChild(hb);var ib=hb.sheet;return function(jb){ib.insertRule(jb,ib.cssRules.length)}},Ha=JSON.stringify,Ia=function(hb,ib,jb){var kb={};return ba(hb,ib,jb,kb),kb},Ja=Object.create(null),Ka=Object.create(null);['columnCount','fillOpacity','flex','flexGrow','flexShrink','fontWeight','lineClamp','lineHeight','opacity','order','orphans','strokeOpacity','transition','transitionDelay','transitionDuration','widows','zIndex','zoom'].forEach(function(hb){Ka[hb]=!0});var La=0,Ma=ja().addRules({input:{font:'inherit',padding:'2px 5px'}});const Pa='#546e7a',Va=Ma.namespace('LoginForm').addRules({root:{display:'inline-block'},form:{backgroundColor:'#cddc39',color:'rgba(0, 0, 0, 0.87)',padding:'5px'},message:{backgroundColor:'#c62828',color:'#ffffff',padding:'5px 10px',marginBottom:'10px'},field:{display:'block',padding:'5px',textAlign:'right'},fieldInput:{inherit:'input',marginLeft:'10px',width:'250px'},button:{inherit:'input',display:'block',width:'calc(100% - 10px)',margin:'5px'}});class Wa extends P{constructor(hb){super(hb),this.state={value:hb.initialValue||''}}render({label:hb,type:ib},{value:jb}){return g('label',{'class':Va('field')},hb,g('input',{'class':Va('fieldInput'),ref:Z(this,'input'),type:ib,value:jb,onInput:$(this,'onInput')}))}getValue(){return this.state.value}onInput(hb){this.setState({value:hb.target.value})}}class Xa extends P{render(hb,{loading:ib,message:jb}){return g('div',{'class':Va('root')},jb&&g('div',{'class':Va('message')},jb),g('form',{'class':Va('form'),onSubmit:$(this,'onSubmit')},g(Wa,{ref:Z(this,'server'),type:'text',label:'Server',initialValue:'https://'}),g(Wa,{ref:Z(this,'email'),type:'email',label:'Email'}),g(Wa,{ref:Z(this,'password'),type:'password',label:'Password'}),g('button',{'class':Va('button'),disabled:ib},ib?'Loading...':'Log in')))}async onSubmit(hb){hb.preventDefault();const ib=ka(this.server.getValue());if(!ib)return this.setState({message:'Invalid domain'});this.setState({loading:!0,message:''});let jb,kb,lb;try{({success:jb,token:kb}=await V(ib,this.email.getValue(),this.password.getValue()))}catch(mb){jb=!1,lb=mb.message}jb?this.props.onLoggedIn(kb):this.setState({message:lb||'Invalid credentials'}),this.setState({loading:!1})}}const Ya=Ma.namespace('Header').addRules({root:{borderBottom:`1px solid ${Pa}`,boxSizing:'border-box',width:'100%',padding:'5px 10px',textAlign:'center'},wrapper:{maxWidth:'600px',display:'flex',margin:'0 auto',justifyContent:'space-between',alignItems:'center'},button:{inherit:'input'}});class Za extends P{render({onLogout:hb,account:{acct:ib}}){return g('div',{'class':Ya('root')},g('div',{'class':Ya('wrapper')},g('div',null,'Welcome ',ib,'!'),g('button',{'class':Ya('button'),onClick:hb},'Logout')))}}const $a=Ma.namespace('root').addRules({root:{paddingTop:'5px'},content:{display:'flex',borderBottom:`1px solid ${Pa}`},reblogAuthor:{color:'rgba(0, 0, 0, 0.38)',paddingLeft:'70px',marginBottom:'5px'},avatar:{marginRight:'10px'},account:{fontWeight:'bold'}});class _a extends P{renderToot(hb){return g('div',{'class':$a('content'),onClick:$(this,'onClick')},g('div',{'class':$a('avatar')},g('img',{src:hb.account.avatar,width:'60',height:'60'})),g('div',null,g('div',{'class':$a('account')},hb.account.acct),g('div',{dangerouslySetInnerHTML:{__html:hb.content}})))}render(hb){return g('div',{'class':$a('root')},hb.reblog&&g('div',{'class':$a('reblogAuthor')},hb.account.acct,' boosted'),this.renderToot(hb.reblog||hb))}onClick(){}}var ab=Object.assign||function(hb){for(var jb,ib=1;ib<arguments.length;ib++)for(var kb in jb=arguments[ib],jb)Object.prototype.hasOwnProperty.call(jb,kb)&&(hb[kb]=jb[kb]);return hb};const bb=Ma.namespace('Timeline').addRules({root:{flex:'1',overflow:'auto',maxWidth:'600px'}});class db extends P{componentWillMount(){this.loadTimeline()}async loadTimeline(){this.setState({loading:!0});const hb=await la(this.props.token);this.setState({loading:!1,timeline:hb})}render({type:hb},{loading:ib,timeline:jb}){return ib?g('div',{'class':bb('root')},'Loading...'):g('div',{'class':bb('root')},jb.map((kb)=>g(_a,ab({key:kb.id},kb))))}}const eb=Ma.namespace('App').addRules({root:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column'},loading:{}});const gb=Ma.namespace('body').addRules({root:{margin:0,height:'100vh',display:'flex',flex:1,fontFamily:'Helvetica Neue,Helvetica,Arial,sans-serif',fontSize:'14px'}});document.body.className=gb('root'),function(hb,ib,jb){return C(jb,hb,{},!1,ib,!1)}(g(class extends P{componentWillMount(){this.fetchState()}async fetchState(){this.setState({loading:!0});const hb=await ma();this.setState(Object.assign({},hb,{loading:!1}))}render(hb,{loading:ib,token:jb,account:kb}){return ib?g('div',{'class':eb('root','loading')},'Loading...'):kb?g('div',{'class':eb('root')},g(Za,{account:kb,onLogout:$(this,'logout')}),g(db,{token:jb,type:'home'})):g('div',{'class':eb('root')},g(Xa,{onLoggedIn:$(this,'fetchState')}))}logout(){X(),this.setState({account:!1})}},null),document.body)}]);
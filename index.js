(function(){'use strict';function b(rb,sb,tb){this.nodeName=rb,this.attributes=sb,this.children=tb,this.key=sb&&sb.key}function d(rb,sb){let tb,ub,vb,wb,xb;for(xb=arguments.length;2<xb--;)va.push(arguments[xb]);for(sb&&sb.children&&(!va.length&&va.push(sb.children),delete sb.children);va.length;)if((vb=va.pop())instanceof Array)for(xb=vb.length;xb--;)va.push(vb[xb]);else null!=vb&&!0!==vb&&!1!==vb&&('number'==typeof vb&&(vb+=''),wb='string'==typeof vb,wb&&ub?tb[tb.length-1]+=vb:((tb||(tb=[])).push(vb),ub=wb));let yb=new b(rb,sb||void 0,tb||wa);return ua.vnode&&ua.vnode(yb),yb}function g(rb,sb){if(sb)for(let tb in sb)rb[tb]=sb[tb];return rb}function k(rb){return g({},rb)}function m(rb,sb){for(let tb=sb.split('.'),ub=0;ub<tb.length&&rb;ub++)rb=rb[tb[ub]];return rb}function n(rb){return'function'==typeof rb}function q(rb){return'string'==typeof rb}function r(rb){let sb='';for(let tb in rb)rb[tb]&&(sb&&(sb+=' '),sb+=tb);return sb}function u(rb,sb,tb){let ub=sb.split('.');return function(vb){let wb=vb&&vb.target||this,xb={},yb=xb,zb=q(tb)?m(vb,tb):wb.nodeName?wb.type.match(/^che|rad/)?wb.checked:wb.value:vb,Ab=0;for(;Ab<ub.length-1;Ab++)yb=yb[ub[Ab]]||(yb[ub[Ab]]=!Ab&&rb.state[ub[Ab]]||{});yb[ub[Ab]]=zb,rb.setState(xb)}}function w(rb){!rb._dirty&&(rb._dirty=!0)&&1==Ja.push(rb)&&(ua.debounceRendering||Aa)(x)}function x(){let rb,sb=Ja;for(Ja=[];rb=sb.pop();)rb._dirty&&S(rb)}function y(rb){let sb=rb&&rb.nodeName;return sb&&n(sb)&&!(sb.prototype&&sb.prototype.render)}function z(rb,sb){return rb.nodeName(C(rb),sb||Fa)}function A(rb,sb){return q(sb)?rb instanceof Text:q(sb.nodeName)?!rb._componentConstructor&&B(rb,sb.nodeName):n(sb.nodeName)?!rb._componentConstructor||rb._componentConstructor===sb.nodeName||y(sb):void 0}function B(rb,sb){return rb.normalizedNodeName===sb||ya(rb.nodeName)===ya(sb)}function C(rb){let sb=k(rb.attributes);sb.children=rb.children;let tb=rb.nodeName.defaultProps;if(tb)for(let ub in tb)void 0===sb[ub]&&(sb[ub]=tb[ub]);return sb}function D(rb){let sb=rb.parentNode;sb&&sb.removeChild(rb)}function E(rb,sb,tb,ub,vb){if('className'===sb&&(sb='class'),'class'===sb&&ub&&'object'==typeof ub&&(ub=r(ub)),'key'===sb);else if('class'===sb&&!vb)rb.className=ub||'';else if('style'===sb){if((!ub||q(ub)||q(tb))&&(rb.style.cssText=ub||''),ub&&'object'==typeof ub){if(!q(tb))for(let wb in tb)wb in ub||(rb.style[wb]='');for(let wb in ub)rb.style[wb]='number'!=typeof ub[wb]||Ha[wb]?ub[wb]:ub[wb]+'px'}}else if('dangerouslySetInnerHTML'===sb)ub&&(rb.innerHTML=ub.__html||'');else if('o'==sb[0]&&'n'==sb[1]){let wb=rb._listeners||(rb._listeners={});sb=ya(sb.substring(2)),ub?!wb[sb]&&rb.addEventListener(sb,G,!!Ia[sb]):wb[sb]&&rb.removeEventListener(sb,G,!!Ia[sb]),wb[sb]=ub}else if('list'!==sb&&'type'!==sb&&!vb&&sb in rb)F(rb,sb,null==ub?'':ub),(null==ub||!1===ub)&&rb.removeAttribute(sb);else{let wb=vb&&sb.match(/^xlink\:?(.+)/);null==ub||!1===ub?wb?rb.removeAttributeNS('http://www.w3.org/1999/xlink',ya(wb[1])):rb.removeAttribute(sb):'object'!=typeof ub&&!n(ub)&&(wb?rb.setAttributeNS('http://www.w3.org/1999/xlink',ya(wb[1]),ub):rb.setAttribute(sb,ub))}}function F(rb,sb,tb){try{rb[sb]=tb}catch(ub){}}function G(rb){return this._listeners[rb.type](ua.event&&ua.event(rb)||rb)}function H(rb){if(D(rb),rb instanceof Element){rb._component=rb._componentConstructor=null;let sb=rb.normalizedNodeName||ya(rb.nodeName);(Ka[sb]||(Ka[sb]=[])).push(rb)}}function I(rb,sb){let tb=ya(rb),ub=Ka[tb]&&Ka[tb].pop()||(sb?document.createElementNS('http://www.w3.org/2000/svg',rb):document.createElement(rb));return ub.normalizedNodeName=tb,ub}function J(){for(let rb;rb=La.pop();)ua.afterMount&&ua.afterMount(rb),rb.componentDidMount&&rb.componentDidMount()}function K(rb,sb,tb,ub,vb,wb){Ma++||(Na=vb&&'undefined'!=typeof vb.ownerSVGElement,Oa=rb&&!(Ga in rb));let xb=L(rb,sb,tb,ub);return vb&&xb.parentNode!==vb&&vb.appendChild(xb),--Ma||(Oa=!1,!wb&&J()),xb}function L(rb,sb,tb,ub){let vb=sb&&sb.attributes&&sb.attributes.ref;for(;y(sb);)sb=z(sb,tb);if(null==sb&&(sb=''),q(sb))return rb&&rb instanceof Text&&rb.parentNode?rb.nodeValue!=sb&&(rb.nodeValue=sb):(rb&&N(rb),rb=document.createTextNode(sb)),rb;if(n(sb.nodeName))return T(rb,sb,tb,ub);let wb=rb,xb=sb.nodeName+'',yb=Na,zb=sb.children;if(Na='svg'===xb||'foreignObject'!==xb&&Na,!rb)wb=I(xb,Na);else if(!B(rb,xb)){for(wb=I(xb,Na);rb.firstChild;)wb.appendChild(rb.firstChild);rb.parentNode&&rb.parentNode.replaceChild(wb,rb),N(rb)}let Ab=wb.firstChild,Bb=wb[Ga];if(!Bb){wb[Ga]=Bb={};for(let Cb=wb.attributes,Db=Cb.length;Db--;)Bb[Cb[Db].name]=Cb[Db].value}return!Oa&&zb&&1===zb.length&&'string'==typeof zb[0]&&Ab&&Ab instanceof Text&&!Ab.nextSibling?Ab.nodeValue!=zb[0]&&(Ab.nodeValue=zb[0]):(zb&&zb.length||Ab)&&M(wb,zb,tb,ub,!!Bb.dangerouslySetInnerHTML),O(wb,sb.attributes,Bb),vb&&(Bb.ref=vb)(wb),Na=yb,wb}function M(rb,sb,tb,ub,vb){let Eb,Fb,Gb,Hb,wb=rb.childNodes,xb=[],yb={},zb=0,Ab=0,Bb=wb.length,Cb=0,Db=sb&&sb.length;if(Bb)for(let Ib=0;Ib<Bb;Ib++){let Jb=wb[Ib],Kb=Jb[Ga],Lb=Db?(Fb=Jb._component)?Fb.__key:Kb?Kb.key:null:null;null==Lb?(Oa||vb||Kb||Jb instanceof Text)&&(xb[Cb++]=Jb):(zb++,yb[Lb]=Jb)}if(Db)for(let Ib=0;Ib<Db;Ib++){Gb=sb[Ib],Hb=null;let Jb=Gb.key;if(null!=Jb)zb&&Jb in yb&&(Hb=yb[Jb],yb[Jb]=void 0,zb--);else if(!Hb&&Ab<Cb)for(Eb=Ab;Eb<Cb;Eb++)if(Fb=xb[Eb],Fb&&A(Fb,Gb)){Hb=Fb,xb[Eb]=void 0,Eb===Cb-1&&Cb--,Eb===Ab&&Ab++;break}Hb=L(Hb,Gb,tb,ub),Hb&&Hb!==rb&&(Ib>=Bb?rb.appendChild(Hb):Hb!==wb[Ib]&&(Hb===wb[Ib+1]&&D(wb[Ib]),rb.insertBefore(Hb,wb[Ib]||null)))}if(zb)for(let Ib in yb)yb[Ib]&&N(yb[Ib]);for(;Ab<=Cb;)Hb=xb[Cb--],Hb&&N(Hb)}function N(rb,sb){let tb=rb._component;if(tb)U(tb,!sb);else{rb[Ga]&&rb[Ga].ref&&rb[Ga].ref(null),sb||H(rb);for(let ub;ub=rb.lastChild;)N(ub,sb)}}function O(rb,sb,tb){for(var ub in tb)sb&&ub in sb||null==tb[ub]||E(rb,ub,tb[ub],tb[ub]=void 0,Na);if(sb)for(ub in sb)'children'===ub||'innerHTML'===ub||ub in tb&&sb[ub]===('value'===ub||'checked'===ub?rb[ub]:tb[ub])||E(rb,ub,tb[ub],tb[ub]=sb[ub],Na)}function P(rb){let sb=rb.constructor.name,tb=Pa[sb];tb?tb.push(rb):Pa[sb]=[rb]}function Q(rb,sb,tb){let ub=new rb(sb,tb),vb=Pa[rb.name];if(V.call(ub,sb,tb),vb)for(let wb=vb.length;wb--;)if(vb[wb].constructor===rb){ub.nextBase=vb[wb].nextBase,vb.splice(wb,1);break}return ub}function R(rb,sb,tb,ub,vb){rb._disable||(rb._disable=!0,(rb.__ref=sb.ref)&&delete sb.ref,(rb.__key=sb.key)&&delete sb.key,!rb.base||vb?rb.componentWillMount&&rb.componentWillMount():rb.componentWillReceiveProps&&rb.componentWillReceiveProps(sb,ub),ub&&ub!==rb.context&&(!rb.prevContext&&(rb.prevContext=rb.context),rb.context=ub),!rb.prevProps&&(rb.prevProps=rb.props),rb.props=sb,rb._disable=!1,tb!==Ba&&(tb!==Ca&&!1===ua.syncComponentUpdates&&rb.base?w(rb):S(rb,Ca,vb)),rb.__ref&&rb.__ref(rb))}function S(rb,sb,tb,ub){if(rb._disable)return;let vb,wb,Hb,Ib,xb=rb.props,yb=rb.state,zb=rb.context,Ab=rb.prevProps||xb,Bb=rb.prevState||yb,Cb=rb.prevContext||zb,Db=rb.base,Eb=rb.nextBase,Fb=Db||Eb,Gb=rb._component;if(Db&&(rb.props=Ab,rb.state=Bb,rb.context=Cb,sb!==Da&&rb.shouldComponentUpdate&&!1===rb.shouldComponentUpdate(xb,yb,zb)?vb=!0:rb.componentWillUpdate&&rb.componentWillUpdate(xb,yb,zb),rb.props=xb,rb.state=yb,rb.context=zb),rb.prevProps=rb.prevState=rb.prevContext=rb.nextBase=null,rb._dirty=!1,!vb){for(rb.render&&(wb=rb.render(xb,yb,zb)),rb.getChildContext&&(zb=g(k(zb),rb.getChildContext()));y(wb);)wb=z(wb,zb);let Mb,Nb,Lb=wb&&wb.nodeName;if(n(Lb)){let Ob=C(wb);Hb=Gb,Hb&&Hb.constructor===Lb&&Ob.key==Hb.__key?R(Hb,Ob,Ca,zb):(Mb=Hb,Hb=Q(Lb,Ob,zb),Hb.nextBase=Hb.nextBase||Eb,Hb._parentComponent=rb,rb._component=Hb,R(Hb,Ob,Ba,zb),S(Hb,Ca,tb,!0)),Nb=Hb.base}else Ib=Fb,Mb=Gb,Mb&&(Ib=rb._component=null),(Fb||sb===Ca)&&(Ib&&(Ib._component=null),Nb=K(Ib,wb,zb,tb||!Db,Fb&&Fb.parentNode,!0));if(Fb&&Nb!==Fb&&Hb!==Gb){let Ob=Fb.parentNode;Ob&&Nb!==Ob&&(Ob.replaceChild(Nb,Fb),!Mb&&(Fb._component=null,N(Fb)))}if(Mb&&U(Mb,Nb!==Fb),rb.base=Nb,Nb&&!ub){let Ob=rb,Pb=rb;for(;Pb=Pb._parentComponent;)(Ob=Pb).base=Nb;Nb._component=Ob,Nb._componentConstructor=Ob.constructor}}!Db||tb?La.unshift(rb):!vb&&(rb.componentDidUpdate&&rb.componentDidUpdate(Ab,Bb,Cb),ua.afterUpdate&&ua.afterUpdate(rb));let Kb,Jb=rb._renderCallbacks;if(Jb)for(;Kb=Jb.pop();)Kb.call(rb);Ma||ub||J()}function T(rb,sb,tb,ub){let vb=rb&&rb._component,wb=vb,xb=rb,yb=vb&&rb._componentConstructor===sb.nodeName,zb=yb,Ab=C(sb);for(;vb&&!zb&&(vb=vb._parentComponent);)zb=vb.constructor===sb.nodeName;return vb&&zb&&(!ub||vb._component)?(R(vb,Ab,Ea,tb,ub),rb=vb.base):(wb&&!yb&&(U(wb,!0),rb=xb=null),vb=Q(sb.nodeName,Ab,tb),rb&&!vb.nextBase&&(vb.nextBase=rb,xb=null),R(vb,Ab,Ca,tb,ub),rb=vb.base,xb&&rb!==xb&&(xb._component=null,N(xb))),rb}function U(rb,sb){ua.beforeUnmount&&ua.beforeUnmount(rb);let tb=rb.base;rb._disable=!0,rb.componentWillUnmount&&rb.componentWillUnmount(),rb.base=null;let ub=rb._component;if(ub)U(ub,sb);else if(tb){tb[Ga]&&tb[Ga].ref&&tb[Ga].ref(null),rb.nextBase=tb,sb&&(D(tb),P(rb));for(let vb;vb=tb.lastChild;)N(vb,!sb)}rb.__ref&&rb.__ref(null),rb.componentDidUnmount&&rb.componentDidUnmount()}function V(rb,sb){this._dirty=!0,this.context=sb,this.props=rb,this.state||(this.state={})}function X(rb,sb,tb){return sb.startsWith('oauth/')||(sb=`api/v1/${sb}`),fetch(`https://${rb}/${sb}`,tb)}function Y(rb,sb,tb){return X(rb.domain,sb,Object.assign({},tb,{headers:{Authorization:`Bearer ${rb.access_token}`}}))}function Z(rb){return Ra.entry(`registration-${rb}`).orInsertWith(()=>$(rb))}async function $(rb){const sb=new URLSearchParams;sb.append('response_type','code'),sb.append('client_name','Leviathan'),sb.append('redirect_uris','urn:ietf:wg:oauth:2.0:oob');const tb=await X(rb,'apps',{method:'POST',body:sb});return await tb.json()}async function _(rb,sb,tb){const ub=await Z(rb),vb=new URLSearchParams;vb.append('client_id',ub.client_id),vb.append('client_secret',ub.client_secret),vb.append('grant_type','password'),vb.append('username',sb),vb.append('password',tb);const wb=await X(rb,'oauth/token',{method:'POST',redirect:'manual',body:vb});if(200!==wb.status)return{success:!1};const xb=Object.assign((await wb.json()),{domain:rb});return Ra.set('token',xb),{success:!0,token:xb}}function aa(){return Ra.get('token')}function ba(){Ra.delete('token')}async function ca(rb){const sb=await Y(rb,'accounts/verify_credentials');return await sb.json()}function da(rb,sb){return(tb)=>{rb[sb]=tb}}function ea(rb,sb){return(...tb)=>rb[sb](...tb)}function fa(rb){if(!rb||'object'!==('undefined'==typeof rb?'undefined':Sa(rb)))return!1;var sb=Object.getPrototypeOf(rb);return!sb||sb===Object.prototype}function ga(rb,sb,tb){return'object'===('undefined'==typeof sb?'undefined':Sa(sb))&&sb?(Object.keys(sb).forEach(function(ub){var vb=sb[ub];void 0===vb||null===vb?delete rb[ub]:!0!==tb&&fa(vb)?((!Ta(rb,ub)||!fa(rb[ub]))&&(rb[ub]={}),ga(rb[ub],vb)):rb[ub]=vb}),rb):rb}function ha(rb,sb,tb,ub){var vb=void 0;for(vb in sb){var wb=sb[vb];if(vb in rb){var xb=rb[vb],yb='function'==typeof xb,zb=vb+':'+Va(yb?wb:!!wb);if(!Ta(tb,zb)){tb[zb]=ga({},yb?xb(wb):wb&&xb);var Ab={};ha(rb,tb[zb],tb,Ab),tb[zb]=Ab}ga(ub,tb[zb])}else fa(wb)?(Ta(ub,vb)&&fa(ub[vb])||(ub[vb]={}),ha(rb,wb,tb,ub[vb])):ub[vb]=wb}return ub}function ia(rb){if(!/^[a-z](?:[a-z0-9_-]*[a-z0-9])?$/i.test(rb))throw new Error('Invalid identifier: '+rb)}function ja(rb,sb,tb){for(var vb,ub=rb.length-1;0<=ub;ub--)vb=rb[ub],vb&&('number'==typeof vb.length?ja(vb,sb,tb):!tb[vb.id]&&(sb.unshift(vb),tb[vb.id]=!0,vb.parents&&ja(vb.parents,sb,tb)))}function ka(){var rb=[];return ja(arguments,rb,{}),rb}function la(rb){return rb.replace(/([A-Z])/g,'-$1')}function ma(rb,sb){if(ia(rb),Array.isArray(sb))return sb.map(function(ub){return ma(rb,ub)}).reverse().join('\n');var tb=Ya[rb];return'content'===rb?sb=JSON.stringify(sb):'number'==typeof sb&&!tb&&(sb+='px'),rb in Xa||(Xa[rb]=la(rb)),Xa[rb]+':'+sb+';'}function na(rb,sb,tb,ub){var vb='',wb=[];for(var xb in sb){var yb=sb[xb];fa(yb)?wb.push(xb):vb+=ma(xb,yb)}vb&&(vb=rb+'{'+vb+'}',ub&&(vb=ub+'{'+vb+'}'),tb(vb));for(var zb=0;zb<wb.length;zb++){var Ab=wb[zb],Bb=sb[Ab];if('@'===Ab[0])na(rb,Bb,tb,Ab);else{var Cb='$'===Ab[0]?'::'+Ab.slice(1):':'===Ab[0]?Ab:':'+Ab;na(''+rb+la(Cb),Bb,tb,ub)}}}function oa(rb){var sb=0,tb=Object.create(null);return function(vb){var wb=-1,xb=ka(vb).map(function(zb){for(var Ab=-1,Bb=tb[zb.id]||(tb[zb.id]=[]),Cb=0;Cb<Bb.length;Cb++)if(Bb[Cb]>wb){Ab=Bb[Cb];break}return 0>Ab&&(na('.'+zb.class+'__'+sb,zb.declarations,rb),Bb.push(sb),Ab=sb,sb+=1),wb=Ab,zb.class+'__'+Ab}),yb={};return Object.defineProperties(yb,{toString:{value:function(){return xb.join(' ')}},_rules:{value:vb}}),xb.forEach(function(zb){return yb[zb]=!0}),yb}}function pa(){function rb(){return Jb(ub(arguments))}function sb(Ob){return function(Pb){if(!Pb||'object'!==('undefined'==typeof Pb?'undefined':Sa(Pb)))throw new Error('The \'set\' argument should be an object');for(var Qb in Pb)Ob(Qb,Pb[Qb]);return rb}}function tb(Ob,Pb){var Rb,Qb=void 0;for(Qb=0,Rb=Ob.length;Qb<Rb;Qb++){var Sb=Ob[Qb];if(Sb){var Tb='undefined'==typeof Sb?'undefined':Sa(Sb);if('object'===Tb&&Sb)Sb._rules?tb(Sb._rules,Pb):Sb.length?tb(Sb,Pb):Pb.push(Sb);else if('string'===Tb){if(!(Sb in Nb))throw new Error('Unknown style "'+Sb+'"');Pb.push(Nb[Sb])}else throw new Error('Style "'+Sb+'" has wrong type')}}return Pb}function ub(){return tb(arguments,[])}function wb(Ob,Pb){if('string'!=typeof Ob)throw new Error('The \'name\' argument should be a string');if(!Pb||'object'!==('undefined'==typeof Pb?'undefined':Sa(Pb))&&'function'!=typeof Pb)throw new Error('The \'definition\' argument should be an object or a function');if(Ta(Mb,Ob))throw new Error('The transform '+Ob+' already exists');return Mb[Ob]=Pb,rb}function xb(Ob,Pb){if('string'!=typeof Ob)throw new Error('The \'name\' argument should be a string');if(ia(Ob),!fa(Pb))throw new Error('The \'declaration\' argument should be a plain object');if(Ta(Nb,Ob))throw new Error('A "'+Ob+'" style already exists');var Qb=Pb.inherit?Array.isArray(Pb.inherit)?Pb.inherit:[Pb.inherit]:[];return Nb[Ob]={id:Za,class:Ab+'__'+Ob,parents:ub(Qb),declarations:Wa(Mb,Pb,Kb)},Za+=1,rb}var yb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},zb=yb.name,Ab=void 0===zb?'':zb,Bb=yb.backend,Cb=void 0===Bb?null:Bb,Db=yb._renderer,Eb=void 0===Db?null:Db,Fb=yb._styles,Gb=void 0===Fb?null:Fb,Hb=yb._transforms,Ib=void 0===Hb?null:Hb;if('string'!=typeof Ab)throw new Error('The \'name\' option should be a string');if(null!==Cb&&'function'!=typeof Cb)throw new Error('The \'backend\' option should be a function');var Jb=Eb||oa(Cb||Ua()),Kb=Object.create(null),Lb=Object.create(null),Mb=Object.create(Ib),Nb=Object.create(Gb);return rb.namespace=function(Ob){if(ia(Ob),'string'!=typeof Ob)throw new Error('The \'name\' argument should be a string');return Ob in Lb||(Lb[Ob]=pa({name:Ab?Ab+'_'+Ob:Ob,_renderer:Jb,_transforms:Mb,_styles:Nb})),Lb[Ob]},rb.addTransform=wb,rb.addTransforms=sb(wb),rb.addRule=xb,rb.addRules=sb(xb),rb}function qa(rb){return /^(?:https?:\/\/)?([^\/]*)/.exec(rb)[1]}async function ra(rb){const sb=await Y(rb,'timelines/home');return await sb.json()}async function sa(){const rb=aa();if(rb){const sb=await ca(rb);return{account:sb,token:rb}}return{account:!1}}var ua={};const va=[],wa=[];let xa={};const ya=(rb)=>xa[rb]||(xa[rb]=rb.toLowerCase());let za='undefined'!=typeof Promise&&Promise.resolve();const Aa=za?(rb)=>{za.then(rb)}:setTimeout,Ba=0,Ca=1,Da=2,Ea=3,Fa={},Ga='undefined'==typeof Symbol?'__preactattr_':Symbol.for('preactattr'),Ha={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},Ia={blur:1,error:1,focus:1,load:1,resize:1,scroll:1};let Ja=[];const Ka={},La=[];let Ma=0,Na=!1,Oa=!1;const Pa={};g(V.prototype,{linkState(rb,sb){let tb=this._linkedStates||(this._linkedStates={});return tb[rb+sb]||(tb[rb+sb]=u(this,rb,sb))},setState(rb,sb){let tb=this.state;this.prevState||(this.prevState=k(tb)),g(tb,n(rb)?rb(tb,this.props):rb),sb&&(this._renderCallbacks=this._renderCallbacks||[]).push(sb),w(this)},forceUpdate(){S(this,Da)},render(){}});class Qa{constructor(rb,sb){this._holder=rb,this._key=sb}get key(){return this._key}orInsert(rb){return this._holder.has(this._key)||this._holder.set(this._key,rb),this._holder.get(this._key)}async orInsertWith(rb){return this._holder.has(this._key)||this._holder.set(this._key,(await rb())),this._holder.get(this._key)}}var Ra={get(rb){const sb=localStorage.getItem(rb);if(sb)try{return JSON.parse(sb)}catch(tb){}},set(rb,sb){localStorage.setItem(rb,JSON.stringify(sb))},has(rb){return localStorage.hasOwnProperty(rb)},delete(rb){localStorage.removeItem(rb)},entry(rb){return new Qa(this,rb)}},Sa='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(rb){return typeof rb}:function(rb){return rb&&'function'==typeof Symbol&&rb.constructor===Symbol&&rb!==Symbol.prototype?'symbol':typeof rb},Ta=function(rb,sb){return Object.prototype.hasOwnProperty.call(rb,sb)},Ua=function(){var rb=document.createElement('style');document.head.appendChild(rb);var sb=rb.sheet;return function(tb){sb.insertRule(tb,sb.cssRules.length)}},Va=JSON.stringify,Wa=function(rb,sb,tb){var ub={};return ha(rb,sb,tb,ub),ub},Xa=Object.create(null),Ya=Object.create(null);['columnCount','fillOpacity','flex','flexGrow','flexShrink','fontWeight','lineClamp','lineHeight','opacity','order','orphans','strokeOpacity','transition','transitionDelay','transitionDuration','widows','zIndex','zoom'].forEach(function(rb){Ya[rb]=!0});var Za=0,$a=pa().addRules({input:{font:'inherit',padding:'2px 5px'}});const bb='#546e7a',fb=$a.namespace('LoginForm').addRules({root:{display:'inline-block'},form:{backgroundColor:'#cddc39',color:'rgba(0, 0, 0, 0.87)',padding:'5px'},message:{backgroundColor:'#c62828',color:'#ffffff',padding:'5px 10px',marginBottom:'10px'},field:{display:'block',padding:'5px',textAlign:'right'},fieldInput:{inherit:'input',marginLeft:'10px',width:'250px'},button:{inherit:'input',display:'block',width:'calc(100% - 10px)',margin:'5px'}});class gb extends V{constructor(rb){super(rb),this.state={value:rb.initialValue||''}}render({label:rb,type:sb},{value:tb}){return d('label',{'class':fb('field')},rb,d('input',{'class':fb('fieldInput'),ref:da(this,'input'),type:sb,value:tb,onInput:ea(this,'onInput')}))}getValue(){return this.state.value}onInput(rb){this.setState({value:rb.target.value})}}class hb extends V{render(rb,{loading:sb,message:tb}){return d('div',{'class':fb('root')},tb&&d('div',{'class':fb('message')},tb),d('form',{'class':fb('form'),onSubmit:ea(this,'onSubmit')},d(gb,{ref:da(this,'server'),type:'text',label:'Server',initialValue:'https://'}),d(gb,{ref:da(this,'email'),type:'email',label:'Email'}),d(gb,{ref:da(this,'password'),type:'password',label:'Password'}),d('button',{'class':fb('button'),disabled:sb},sb?'Loading...':'Log in')))}async onSubmit(rb){rb.preventDefault();const sb=qa(this.server.getValue());if(!sb)return this.setState({message:'Invalid domain'});this.setState({loading:!0,message:''});let tb,ub,vb;try{({success:tb,token:ub}=await _(sb,this.email.getValue(),this.password.getValue()))}catch(wb){tb=!1,vb=wb.message}tb?this.props.onLoggedIn(ub):this.setState({message:vb||'Invalid credentials'}),this.setState({loading:!1})}}const ib=$a.namespace('Header').addRules({root:{borderBottom:`1px solid ${bb}`,boxSizing:'border-box',width:'100%',padding:'5px 10px',textAlign:'center'},wrapper:{maxWidth:'600px',display:'flex',margin:'0 auto',justifyContent:'space-between',alignItems:'center'},button:{inherit:'input'}});class jb extends V{render({onLogout:rb,account:{acct:sb}}){return d('div',{'class':ib('root')},d('div',{'class':ib('wrapper')},d('div',null,'Welcome ',sb,'!'),d('button',{'class':ib('button'),onClick:rb},'Logout')))}}var kb=Object.assign||function(rb){for(var tb,sb=1;sb<arguments.length;sb++)for(var ub in tb=arguments[sb],tb)Object.prototype.hasOwnProperty.call(tb,ub)&&(rb[ub]=tb[ub]);return rb};const lb=$a.namespace('Timeline').addRules({root:{flex:'1',overflow:'auto',maxWidth:'600px'},toot:{borderBottom:`1px solid ${bb}`}});class mb extends V{render({content:rb,account:{acct:sb}}){return d('div',{'class':lb('toot')},d('div',null,sb),d('div',{dangerouslySetInnerHTML:{__html:rb}}))}}class nb extends V{componentWillMount(){this.loadTimeline()}async loadTimeline(){this.setState({loading:!0});const rb=await ra(this.props.token);this.setState({loading:!1,timeline:rb})}render({type:rb},{loading:sb,timeline:tb}){return sb?d('div',{'class':lb('root')},'Loading...'):(console.log(tb),d('div',{'class':lb('root')},tb.map((ub)=>d(mb,kb({key:ub.id},ub)))))}}const ob=$a.namespace('App').addRules({root:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column'},loading:{}});const qb=$a.namespace('body').addRules({root:{margin:0,height:'100vh',display:'flex',flex:1,fontFamily:'Helvetica Neue,Helvetica,Arial,sans-serif',fontSize:'14px'}});document.body.className=qb('root'),function(rb,sb,tb){return K(tb,rb,{},!1,sb)}(d(class extends V{componentWillMount(){this.fetchState()}async fetchState(){this.setState({loading:!0});const rb=await sa();this.setState(Object.assign({},rb,{loading:!1}))}render(rb,{loading:sb,token:tb,account:ub}){return sb?d('div',{'class':ob('root','loading')},'Loading...'):ub?d('div',{'class':ob('root')},d(jb,{account:ub,onLogout:ea(this,'logout')}),d(nb,{token:tb,type:'home'})):d('div',{'class':ob('root')},d(hb,{onLoggedIn:ea(this,'fetchState')}))}logout(){ba(),this.setState({account:!1})}},null),document.body)})();
